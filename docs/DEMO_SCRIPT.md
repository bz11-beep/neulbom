# 늘봄 시연 스크립트

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | 늘봄 (AI 기반 노인 돌봄 음성 분석 시스템) |
| 문서 버전 | 1.0 |
| 작성일 | 2026-02-09 |
| 개발 기간 | 2025년 12월 ~ 2026년 2월 (2025.12.05 ~ 2026.02.10) |
| 개발 인원 | 5명 (최선임 총괄기획, 지태민 프론트엔드, 김승민 백엔드, 최대영 DB/IoT, 조민솔 기획/문서) |

---

## 목차

1. [시연 전 준비사항](#시연-전-준비사항)
2. [테스트 계정](#테스트-계정)
3. [시연 흐름도](#시연-흐름도)
4. [STEP 1: 메인 화면 - 서비스 소개](#step-1-메인-화면---서비스-소개)
5. [STEP 2: 회원가입](#step-2-회원가입)
6. [STEP 3: 로그인 및 대시보드](#step-3-로그인-및-대시보드)
7. [STEP 4: 보미 대화 - 음성 분석](#step-4-보미-대화---음성-분석)
8. [STEP 5: 리포트 확인](#step-5-리포트-확인)
9. [STEP 6: 헬스체크 - 시스템 상태 확인](#step-6-헬스체크---시스템-상태-확인)
10. [STEP 7: 마이페이지 - 정보 수정](#step-7-마이페이지---정보-수정)
11. [STEP 8: 알림 확인](#step-8-알림-확인)
12. [비상 대응 가이드](#비상-대응-가이드)
13. [예상 소요 시간](#예상-소요-시간)

---

## 시연 전 준비사항

### 1. 서버 환경 확인

| 항목 | 확인 내용 | 명령어/방법 |
|------|----------|------------|
| Python 가상환경 | `.venv` 활성화 상태 | `.venv\Scripts\activate` |
| Flask 서버 | Port 5000 실행 | `python bomi.py` |
| MySQL 연결 | care_db 접속 가능 | 워크벤치에서 `192.168.0.31` 접속 확인 |
| AI 모델 로드 | SpeechAnalyzer, LLM, TTS 초기화 완료 | 콘솔에서 `[OK]` 메시지 확인 |
| 마이크 | 시연 PC 마이크 정상 동작 | 브라우저 설정 > 마이크 권한 허용 |
| 브라우저 | Chrome 최신 버전 권장 | MediaRecorder API 지원 필수 |

### 2. 서버 시작 순서

```
1. 가상환경 활성화
   > cd C:\Users\admin\Desktop\neulbomProject
   > .venv\Scripts\activate

2. Flask 서버 시작 (AI 모델 자동 로드, 약 2-3분 소요)
   > python bomi.py

3. 콘솔에서 다음 메시지가 나올 때까지 대기:
   ============================================================
   [OK] 음성 분석 모델 준비 완료!
   ============================================================

4. 브라우저에서 접속
   > http://localhost:5000
```

### 3. 시연 전 체크리스트

- [ ] Flask 서버 정상 실행 (콘솔에 에러 없음)
- [ ] MySQL DB 연결 확인 (care_db)
- [ ] 테스트 계정 로그인 가능 여부 확인
- [ ] 마이크 권한 허용 (브라우저)
- [ ] 음성 출력 볼륨 확인 (TTS 응답 재생용)
- [ ] 프로젝터/화면 공유 연결 확인
- [ ] 두 번째 창으로 콘솔 로그 표시 준비 (선택)

---

## 테스트 계정

| 구분 | 아이디 | 비밀번호 | 비고 |
|------|--------|----------|------|
| 테스트 계정 1 | test1 | 1234 | 기본 테스트 (기기/센서 등록 완료) |
| 테스트 계정 2 | test2 | 1234 | 기기 미등록 상태 테스트용 |
| 시연용 신규 가입 | (시연 중 생성) | - | 회원가입 플로우 시연용 |

> **참고**: 시연 전 테스트 계정으로 로그인이 되는지 반드시 확인하세요.
> 기기(센서)가 등록되어 있어야 음성 녹음 기능이 활성화됩니다.

---

## 시연 흐름도

```
┌─────────────────────────────────────────────────────────────┐
│                      늘봄 시연 흐름도                         │
└─────────────────────────────────────────────────────────────┘

  [STEP 1]           [STEP 2]           [STEP 3]
  메인 화면    ──>   회원가입     ──>   로그인/대시보드
  (서비스 소개)      (보호자+어르신)    (감정 차트, 활동량)
       │                                     │
       │                                     v
       │              [STEP 5]           [STEP 4]
       │              리포트      <──   보미 대화
       │              (분석 이력)       (음성 녹음 > STT >
       │                                감정분석 > AI응답 >
       │                                TTS 재생)
       │                 │
       v                 v
  [STEP 6]           [STEP 7]           [STEP 8]
  헬스체크     ──>   마이페이지   ──>   알림 확인
  (시스템 상태)      (정보 수정)        (Grafana 연동)
```

---

## STEP 1: 메인 화면 - 서비스 소개

> **[화면: index.html - 로그인 페이지]**

### 보여줄 화면
- 늘봄 서비스 메인 로그인 화면
- 서비스 로고 및 환영 메시지
- 로그인 폼 (아이디/비밀번호)
- 회원가입 링크

### 말할 내용

```
"안녕하세요, 저희 팀이 개발한 '늘봄'을 소개하겠습니다.
늘봄은 AI 기반 노인 돌봄 음성 분석 시스템으로,
독거 어르신의 음성을 분석하여 감정 상태를 파악하고,
AI 손녀 '보미'와의 대화를 통해 정서적 케어를 제공하는 서비스입니다.

먼저 회원가입 과정부터 보여드리겠습니다."
```

### 조작 순서
1. 브라우저에서 `http://localhost:5000` 접속
2. 메인 화면이 표시되면 3-5초간 화면 노출
3. "회원가입" 버튼 클릭하여 STEP 2로 이동

---

## STEP 2: 회원가입

> **[화면: signup.html - 회원가입 페이지]**

### 보여줄 화면
- 회원가입 폼 (보호자 정보 + 어르신 정보)
- 주소 검색 API (다음 우편번호)
- 아이디 중복 확인 기능
- 관계 선택, 동거 형태 선택

### 말할 내용

```
"회원가입은 보호자와 어르신 정보를 함께 등록합니다.
보호자는 아이디, 비밀번호, 이름, 연락처, 주소를 입력하고,
어르신의 이름, 생년월일, 성별, 연락처, 주소, 동거 형태를 입력합니다.
주소 입력은 다음 주소 API를 연동하여 편리하게 검색할 수 있습니다.
아이디 중복 확인 기능도 구현되어 있습니다."
```

### 조작 순서
1. "회원가입" 버튼 클릭
2. 보호자 정보 입력
   - 아이디: `demo_user` > "중복 확인" 버튼 클릭
   - 비밀번호: `1234`
   - 이름: `시연자`
   - 연락처: `010-1234-5678`
   - 주소: "주소 검색" 클릭 > 다음 주소 API 팝업에서 주소 선택
   - 어르신과의 관계: `자녀` 선택
3. 어르신 정보 입력
   - 이름: `김순자`
   - 생년월일: `1945-03-15`
   - 성별: `여성` 선택
   - 동거 형태: `독거` 선택
4. "가입하기" 버튼 클릭
5. 성공 메시지 확인 후 로그인 화면으로 이동

> **주의**: 시연 시간 절약을 위해 미리 가입한 테스트 계정(`test1/1234`)으로 진행해도 됩니다.

---

## STEP 3: 로그인 및 대시보드

> **[화면: dashboard.html - 메인 대시보드]**

### 보여줄 화면
- 환영 인사 (보호자명, 어르신명 표시)
- 감정 분석 차트 (Chart.js 도넛/바 차트)
- 활동량 현황 (일간/주간/월간)
- 인지 상태 정보
- 좌측 네비게이션 (대시보드, 보미와 대화, 리포트, 헬스체크, 마이페이지)
- 우측 상단 알림 벨 아이콘

### 말할 내용

```
"테스트 계정으로 로그인하겠습니다.
로그인하면 대시보드가 표시됩니다.
상단에 보호자님 환영 인사와 오늘 날짜가 표시되고,
어르신의 최근 감정 분석 결과를 차트로 확인할 수 있습니다.

활동량은 IoT 센서(모션 센서)와 연동되어
일간, 주간, 월간 활동량을 그래프로 보여줍니다.
좌측 메뉴에서 각 기능으로 이동할 수 있습니다."
```

### 조작 순서
1. 아이디: `test1`, 비밀번호: `1234` 입력
2. "로그인" 버튼 클릭
3. 대시보드 화면 확인
   - 환영 메시지 확인 ("안녕하세요, OOO님!")
   - 감정 분석 차트 영역 가리키며 설명
   - 활동량 그래프 영역 가리키며 설명
4. 좌측 메뉴의 "보미와 대화" 클릭하여 STEP 4로 이동

---

## STEP 4: 보미 대화 - 음성 분석

> **[화면: bomi.html - 보미와 대화 페이지]**

### 보여줄 화면
- 보미 캐릭터 아바타 및 대기 상태 표시
- 마이크 녹음 버튼
- 실시간 분석 패널 (감정 상태, 음성 톤, 말하기 속도, 종합 점수)
- SSE 실시간 진행 상황 (파일 저장 > STT > 감정분석 > AI 응답 > TTS)
- 채팅 메시지 표시 (사용자 발화 + 보미 응답)
- TTS 음성 재생

### 말할 내용

```
"이제 핵심 기능인 '보미와 대화'를 시연하겠습니다.
보미는 AI 손녀 캐릭터로, 어르신과 음성으로 대화합니다.

마이크 버튼을 누르면 녹음이 시작됩니다.
녹음이 끝나면 서버에서 실시간으로 분석이 진행됩니다.

분석 파이프라인은 다음과 같습니다:
1단계 - faster-whisper를 이용한 STT (음성을 텍스트로 변환)
2단계 - KcELECTRA + Wav2Vec2 앙상블 모델로 감정 분석
3단계 - GPT-4o-mini를 활용한 AI 응답 생성
4단계 - Edge TTS로 응답을 음성으로 변환

오른쪽 패널에서 실시간 분석 결과를 확인할 수 있습니다.
SSE(Server-Sent Events) 방식으로 각 단계 진행 상황이
실시간으로 화면에 표시됩니다.

직접 시연해 보겠습니다."
```

### 조작 순서
1. "보미와 대화" 페이지 진입
2. 보미 캐릭터 대기 화면 확인
3. 마이크 버튼 클릭 (녹음 시작)
4. **시연 발화 1**: "보미야, 안녕! 잘 지냈어?" (밝은 톤으로)
   - 녹음 중 파형 애니메이션 확인
5. 마이크 버튼 다시 클릭 (녹음 종료)
6. SSE 실시간 진행 상황 표시 확인
   - `파일 저장 완료` > `STT 음성 인식 중...` > `STT 완료` > `감정 분석: 기쁨` > `AI 응답 생성 중...` > `목소리 만드는 중...` > `TTS 완료`
7. 채팅 영역에 사용자 발화 텍스트 표시 확인
8. 보미 응답 텍스트 + TTS 음성 재생 확인
9. 오른쪽 분석 패널에서 감정 상태, 종합 점수 확인
10. (시간 허용 시) **시연 발화 2**: "요즘 좀 외로워..." (차분한 톤으로)
    - 감정 분석 결과가 변화하는 것을 보여줌 (기쁨 > 슬픔)
    - 보미의 위로 응답 확인

### 핵심 포인트 (강조할 부분)

| 단계 | 기술 | 설명 |
|------|------|------|
| STT | faster-whisper (tiny, int8) | 한국어 음성을 텍스트로 고속 변환 |
| 감정 분석 | KcELECTRA + Wav2Vec2 | 텍스트 감정 + 음성 감정 멀티모달 앙상블 |
| AI 응답 | GPT-4o-mini + Q&A Dataset | 200+ Q&A 데이터셋 시맨틱 매칭 + LLM 폴백 |
| TTS | Edge TTS (SunHiNeural) | 자연스러운 한국어 여성 음성 합성 |
| 실시간 | SSE (Server-Sent Events) | 분석 진행 상황을 실시간 스트리밍 |

---

## STEP 5: 리포트 확인

> **[화면: report.html - 분석 리포트 페이지]**

### 보여줄 화면
- 음성 분석 이력 목록
- 감정 트렌드 그래프
- 8차원 음성 점수 (속도, 발화길이, 반응속도, 단어수, 어휘다양성, 침묵, 감정, 활력도)
- 분석 상세 결과

### 말할 내용

```
"리포트 페이지에서는 어르신의 음성 분석 이력을 확인할 수 있습니다.
각 대화마다 8가지 차원의 음성 점수가 기록됩니다:

1. 말의 속도 (WPM) - 분당 단어 수
2. 발화 길이 - 한 번에 말하는 시간
3. 반응 속도 - 응답까지 걸리는 시간
4. 단어 수 - 발화 내 단어 개수
5. 어휘 다양성 (TTR) - 사용하는 단어의 다양함
6. 침묵 패턴 - 비정상적 침묵 감지
7. 감정 안정도 - 감정 분석 점수
8. 활력도 (VPR) - 발화 대 침묵 비율

이 데이터를 통해 보호자는 어르신의 인지 및 정서 상태를
시간에 따라 추적하고 변화를 감지할 수 있습니다."
```

### 조작 순서
1. 좌측 메뉴에서 "리포트" 클릭
2. 분석 이력 목록 확인
3. 감정 트렌드 차트 가리키며 설명
4. 8차원 점수 항목들 하나씩 가리키며 설명
5. (방금 시연한 대화 결과가 목록에 반영된 것을 보여줌)

---

## STEP 6: 헬스체크 - 시스템 상태 확인

> **[화면: health.html - 헬스체크 페이지]**

### 보여줄 화면
- 시스템 구성 요소별 상태 확인
  - 음성 분석기 (SpeechAnalyzer) 상태
  - LLM 핸들러 (GPT-4o-mini) 상태
  - DB 핸들러 (MySQL care_db) 상태
  - TTS 핸들러 (Edge TTS) 상태
- 각 모듈의 정상/비정상 상태 표시

### 말할 내용

```
"헬스체크 페이지에서는 시스템의 각 구성 요소가
정상적으로 동작하는지 확인할 수 있습니다.
음성 분석기, LLM, 데이터베이스, TTS 모듈의 상태를
한눈에 확인할 수 있어 운영 관리에 활용됩니다."
```

### 조작 순서
1. 좌측 메뉴에서 "헬스체크" 클릭
2. `/api/voice-health` 엔드포인트 호출 결과 확인
3. 각 모듈별 정상(녹색)/비정상(빨간색) 상태 표시 확인

---

## STEP 7: 마이페이지 - 정보 수정

> **[화면: mypage.html - 마이페이지]**

### 보여줄 화면
- 보호자 정보 (이름, 아이디, 연락처, 주소)
- 어르신 정보 (이름, 생년월일, 성별, 연락처, 주소, 동거형태)
- 기기 관리 (등록된 IoT 기기 목록)
- 기기 추가 기능 (시리얼 번호, 기기명, 설치 위치)
- 비밀번호 변경 기능
- 정보 수정 기능

### 말할 내용

```
"마이페이지에서는 보호자 및 어르신 정보를 수정할 수 있습니다.
기기 관리 섹션에서는 IoT 센서 기기를 등록하고 관리합니다.

기기가 등록되면 자동으로 센서 테이블(tb_sensor)에
모션 또는 환경 센서가 생성되며,
이 센서가 있어야 음성 대화 기능이 활성화됩니다.

비밀번호 변경 기능도 구현되어 있습니다."
```

### 조작 순서
1. 좌측 메뉴에서 "마이페이지" 클릭
2. 보호자 정보 영역 확인
3. 어르신 정보 영역 확인
4. 기기 관리 영역 확인
   - 이미 등록된 기기 목록 표시
   - (시간 허용 시) "기기 추가" 버튼 클릭하여 시연
     - 시리얼: `SN-DEMO-001`
     - 기기명: `거실 모션센서`
     - 설치 위치: `거실`
5. 정보 수정 기능 간단 시연 (연락처 변경 등)

---

## STEP 8: 알림 확인

> **[화면: modals.html - 알림 모달]**

### 보여줄 화면
- 우측 상단 알림 벨 아이콘 (안 읽은 알림 뱃지)
- 알림 목록 모달 팝업
- 알림 유형 (감정 이상, 활동량 저하, 센서 이상 등)
- 알림 시간 표시
- 모든 알림 읽음 처리 기능

### 말할 내용

```
"마지막으로 알림 기능입니다.
시스템은 Grafana와 연동되어 이상 감지 시 자동으로 알림을 생성합니다.
예를 들어, 어르신의 감정 점수가 일정 수준 이하로 떨어지거나,
활동량이 급감하면 보호자에게 알림이 전달됩니다.

알림 벨 아이콘을 클릭하면 최근 알림 목록을 확인할 수 있고,
모두 읽음 처리가 가능합니다.

이상으로 늘봄의 주요 기능 시연을 마치겠습니다."
```

### 조작 순서
1. 상단 네비게이션의 알림 벨 아이콘 클릭
2. 알림 목록 모달 팝업 확인
3. 알림 유형 및 내용 가리키며 설명
4. "모두 읽음" 버튼 클릭
5. 뱃지 숫자 사라지는 것 확인

---

## 비상 대응 가이드

### 서버가 시작되지 않을 때

| 증상 | 원인 | 해결 방법 |
|------|------|----------|
| `ModuleNotFoundError` | 패키지 미설치 | `pip install -r requirements.txt` 실행 |
| `DB 연결 실패` | MySQL 서버 중지 | MySQL 서비스 시작 확인, IP/포트 확인 |
| `API Key Missing` | OpenAI 키 미설정 | `api-key/openapi.env` 파일에 키 확인 |
| `CUDA 에러` | GPU 드라이버 문제 | CPU 모드로 자동 전환됨 (정상) |

### 시연 중 문제 발생 시

| 증상 | 대응 방법 |
|------|----------|
| 마이크가 작동하지 않음 | 브라우저 주소창의 마이크 아이콘 클릭 > 허용 > 새로고침 |
| STT 결과가 이상함 | "마이크 가까이에서 천천히 또박또박 말씀해 보겠습니다" 후 재시도 |
| AI 응답이 늦음 | "AI 모델이 분석 중입니다. 잠시 기다려주세요" (15초 이내 응답) |
| TTS 음성이 안 나옴 | "텍스트 응답은 정상 표시되고 있으며, 음성 출력은 별도 확인하겠습니다" |
| 화면이 멈춤 | F5로 새로고침 후 다시 로그인 |
| DB 저장 실패 | 콘솔 에러 확인 후 "DB 연결 일시 불안정이며, 분석 결과는 정상입니다" |

### 시연 팁

- **Q&A 데이터셋 활용**: 다음 질문들은 Q&A 데이터셋에 미리 정의되어 있어 안정적인 응답이 보장됩니다.
  - "보미야 안녕" / "넌 누구야?" / "잘 지냈어?"
  - "약 복용 시간 알려줘" / "배고파" / "머리 아파"
  - "심심해" / "외로워" / "오늘 날씨 좋네"
  - "산책 가자" / "문 잠갔어?"
- **감정 변화 시연**: 첫 번째 발화는 밝게, 두 번째 발화는 차분/슬프게 하여 감정 분석 결과의 변화를 보여주세요.
- **콘솔 로그**: 가능하면 서버 콘솔 로그를 별도 화면에 띄워서 백엔드 처리 과정을 동시에 보여주세요.

---

## 예상 소요 시간

| 단계 | 내용 | 예상 시간 |
|------|------|----------|
| STEP 1 | 메인 화면 소개 | 1분 |
| STEP 2 | 회원가입 시연 | 2분 |
| STEP 3 | 로그인 + 대시보드 | 2분 |
| STEP 4 | 보미 대화 (핵심 시연) | 5분 |
| STEP 5 | 리포트 확인 | 2분 |
| STEP 6 | 헬스체크 | 1분 |
| STEP 7 | 마이페이지 | 1분 |
| STEP 8 | 알림 확인 + 마무리 | 1분 |
| **합계** | | **약 15분** |

> **참고**: 시간이 부족한 경우 STEP 2(회원가입)는 생략하고 테스트 계정으로 직접 로그인하세요.
> 핵심 시연은 STEP 3(대시보드) + STEP 4(보미 대화) + STEP 5(리포트)입니다.
> 최소 시연 시간은 약 8~10분입니다.

---

## 시연 마무리 멘트

```
"이상으로 늘봄 시연을 마치겠습니다.

늘봄은 AI 음성 분석 기술을 활용하여
독거 어르신의 감정 상태를 실시간으로 파악하고,
AI 손녀 '보미'와의 대화를 통해 정서적 케어를 제공합니다.

8차원 음성 분석 체계를 통해 객관적인 상태 데이터를 수집하며,
보호자에게 알림과 리포트를 제공하여
원격으로 어르신의 건강 상태를 모니터링할 수 있습니다.

감사합니다."
```
